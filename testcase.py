# -*- coding: utf-8 -*-
import testmain
import requests
import jinja2
# ["step_name", "request_type", "request_url", "request_data", "expect_result", "data_save"]
# request_data:{"body":"value","param":"value"}
# data_save:{"key":[test1,test2,test3],"key":[test4,test5,test6]}
# expect_result:{"key":[[test1,test2,test3],excpet_content],"key2":[[test4,test5,test6],excpet_content_2]}
# data_save{"key1":[test1,test2,test3],"key2":[test4,test5,test6]}

testpaperContent = "{\r\n\t\"author\": \"俞瑶\",\r\n\t\"belongToCourseId\": \"1\",\r\n\t\"belongToCourseName\": \"课程1\",\r\n\t\"code\": \"42d0s470\",\r\n\t\"name\": \"俞瑶创建的第23张新试卷\",\r\n\t\"testPaperStruct\": {\r\n\t\t\"questionTypeStruct\": [{\r\n\t\t\t\"name\": \"单选题\",\r\n\t\t\t\"no\": \"一\",\r\n\t\t\t\"questionInPaper\": [{\r\n\t\t\t\t\t\"no\": \"1\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 1.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"2\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\":2.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"3\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 3.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"4\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"5\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 5.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"6\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 6.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"7\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 7.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"8\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 8.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"9\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 9.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"10\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 10.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"11\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"12\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"13\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"14\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"15\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"16\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"17\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"18\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\":4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"19\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"20\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"score\": 100.0\r\n\t\t}],\r\n\t\t\"totalScore\": 100.0\r\n\t},\r\n\t\"totalScore\": 100.0,\r\n\t\"type\": \"期中考试\",\r\n\t\"usedCount\": \"10\"\r\n}"
case1 = ["添加组卷", "POST", "/testpapers/smart", {"body": testpaperContent}, 0, {"testpaperId": ["data", "id"]}]
# case2 = ["获取试卷详情", "GET", "/testpapers/" + str(testmain.data.get("testpaperId")), {}, 0, {"result": ["result"]}]
case2 = ["获取试卷详情", "GET", "/testpapers/{{testpaperId}}", {}, 0, {"result": ["result"]}]

case3=["添加角色","POST","/roles",{"body":"{\r\n  \"deletable\": \"1\",\r\n  \"description\": \"测试角1色\",\r\n  \"name\": \"测试角色111\",\r\n  \"type\": \"自定义\"\r\n}"},0,{"roleId":["data","id"]}]
case4=["添加重复角色","POST","/roles",{"body":"{\r\n  \"deletable\": \"1\",\r\n  \"description\": \"测试角1色\",\r\n  \"name\": \"测试角色112\",\r\n  \"type\": \"自定义\"\r\n}"},501,{}]
case5=["编辑角色","PATCH","/roles",{"body":"{\n  \"roleId\": \"{{roleId}}\",\n  \"description\": \"编辑测试角色3331\",\n  \"name\": \"编辑测试角色\"\n}"},0,{}]
case6=["编辑重命名角色","PATCH","/roles",{"body":"{\n  \"roleId\": \"{{roleId}}\",\n  \"description\": \"编辑测试角色3331\",\n  \"name\": \"测试角1色\"\n}"},501,{}]
case7=["批量删除角色","PUT","/roles",{"body":"{\r\n  \"deleteIds\": [\r\n    {{roleId}}\r\n  ]\r\n}"},0,{}]
case8=["根据id获取角色","GET","/roles/{{roleId}}",{},0]
case9=["获取角色列表","GET","/roles?roleQuery=%7B%22roleId%22%3Anull%2C%22name%22%3Anull%2C%22roleNo%22%3Anull%2C%22type%22%3Anull%2C%22pageSize%22%3A%20%220%22%2C%22pageNumber%22%3A%2210%22%7D",{},0,{}]

cases=[case1,case2,case3,case4,case5,case6,case7,case8,case9]

# if __name__=='__main__':
#
#
#     url = "http://localhost:8888/testpapers/smart"
#
#     payload = "{\r\n\t\"author\": \"俞瑶\",\r\n\t\"belongToCourseId\": \"1\",\r\n\t\"belongToCourseName\": \"课程1\",\r\n\t\"code\": \"2014dsse47\",\r\n\t\"name\": \"俞瑶创建的第23张新试卷\",\r\n\t\"testPaperStruct\": {\r\n\t\t\"questionTypeStruct\": [{\r\n\t\t\t\"name\": \"单选题\",\r\n\t\t\t\"no\": \"一\",\r\n\t\t\t\"questionInPaper\": [{\r\n\t\t\t\t\t\"no\": \"1\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 1.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"2\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\":2.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"3\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 3.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"4\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"5\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 5.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"6\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 6.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"7\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 7.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"8\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 8.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"9\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 9.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"10\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 10.0\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"11\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"12\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"13\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"14\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"15\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"16\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"17\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"18\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\":4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"19\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\t\"no\": \"20\",\r\n\t\t\t\t\t\"questionId\": \"0768fa286a7347f89cb1f467e765db4e\",\r\n\t\t\t\t\t\"score\": 4.5\r\n\t\t\t\t}\r\n\t\t\t],\r\n\t\t\t\"score\": 100.0\r\n\t\t}],\r\n\t\t\"totalScore\": 100.0\r\n\t},\r\n\t\"totalScore\": 100.0,\r\n\t\"type\": \"期中考试\",\r\n\t\"usedCount\": \"10\"\r\n}"
#     headers = {
#         'content-type': "application/json",
#         'tenant': "tenant_test",
#         'authorization': "bearer b6acf07d-8623-4886-8cf2-ddee606a787e",
#     }
#     response = requests.request("POST", url, data=payload, headers=headers)
#
#     print(response.text)